import GMaps from 'gmaps/gmaps.js';

const mapElement = document.getElementById('map');
if (mapElement) { // don't try to build a map if there's no div#map to inject in
  const map = new GMaps({ el: '#map', lat: 0, lng: 0 });
  const markers = JSON.parse(mapElement.dataset.markers);
  const start = JSON.parse(mapElement.dataset.start);
  const end = JSON.parse(mapElement.dataset.end);

  const path = JSON.parse(mapElement.dataset.path);
  console.log(markers)
  map.addMarkers(markers);
  // map.addMarker(start);
  // map.addMarker(end);

  map.drawPolyline({
    path: [
 [43.29239, 5.35892],
 [43.29213, 5.35899],
 [43.29204, 5.35896],
 [43.29203, 5.3588],
 [43.29199, 5.35835],
 [43.29198, 5.35835],
 [43.29197, 5.35819],
 [43.29187, 5.35716],
 [43.29079, 5.35734],
 [43.29072, 5.35735],
 [43.29062, 5.35605],
 [43.29061, 5.35594],
 [43.29021, 5.356],
 [43.29018, 5.35601],
 [43.29009, 5.35594],
 [43.28998, 5.35579],
 [43.28993, 5.35574],
 [43.28933, 5.35483],
 [43.28835, 5.35305],
 [43.2881, 5.35252],
 [43.28805, 5.35245],
 [43.2879, 5.35232],
 [43.28735, 5.35217],
 [43.28714, 5.35204],
 [43.28579, 5.35084],
 [43.28579, 5.35083],
 [43.28578, 5.35083],
 [43.28579, 5.35084],
 [43.28571, 5.35118],
 [43.28563, 5.35118],
 [43.28563, 5.35112],
 [43.28557, 5.35112],
 [43.28539, 5.35181],
 [43.28494, 5.35449],
 [43.28485, 5.35467],
 [43.28484, 5.35469],
 [43.28524, 5.35485],
 [43.28526, 5.35482],
 [43.28572, 5.35499],
 [43.28558, 5.35549],
 [43.28575, 5.35562],
 [43.28591, 5.35573],
 [43.28567, 5.35618],
 [43.28554, 5.35643],
 [43.28499, 5.35762],
 [43.28457, 5.35781],
 [43.28453, 5.35794],
 [43.28449, 5.35804],
 [43.28448, 5.35821],
 [43.28446, 5.35859],
 [43.28486, 5.35947],
 [43.28508, 5.35997],
 [43.28506, 5.36008],
 [43.28505, 5.36019],
 [43.2845, 5.36228],
 [43.28369, 5.36329],
 [43.28369, 5.36337],
 [43.28371, 5.36337],
 [43.2839, 5.36335],
 [43.28395, 5.36372],
 [43.28391, 5.36393],
 [43.28375, 5.36463],
 [43.28374, 5.36465],
 [43.28344, 5.36479],
 [43.28323, 5.3649],
 [43.28333, 5.36514],
 [43.28338, 5.36526],
 [43.28326, 5.3654],
 [43.28325, 5.36543],
 [43.28326, 5.3655],
 [43.28332, 5.36564],
 [43.2833, 5.36587],
 [43.28343, 5.36607],
 [43.28348, 5.36607],
 [43.2836, 5.36602],
 [43.28367, 5.36606],
 [43.28375, 5.36605],
 [43.28389, 5.36616],
 [43.28371, 5.36658],
 [43.28373, 5.36663],
 [43.2843, 5.3666],
 [43.28429, 5.36672],
 [43.28429, 5.36672],
 [43.28421, 5.36747],
 [43.28411, 5.36744],
 [43.28406, 5.36743],
 [43.28401, 5.36866],
 [43.28403, 5.36894],
 [43.28401, 5.36924],
 [43.28395, 5.36963],
 [43.28395, 5.36974],
 [43.28399, 5.36982],
 [43.28402, 5.37024],
 [43.28404, 5.37059],
 [43.28398, 5.37053],
 [43.2838, 5.37016],
 [43.28371, 5.37022],
 [43.28372, 5.37029],
 [43.28376, 5.37052],
 [43.28375, 5.3706],
 [43.28365, 5.37069],
 [43.28349, 5.371],
 [43.28349, 5.371],
 [43.28338, 5.37119],
 [43.2833, 5.37124],
 [43.283, 5.37116],
 [43.28298, 5.37113],
 [43.28301, 5.37108],
 [43.28312, 5.37107],
 [43.28316, 5.37103],
 [43.28314, 5.37099],
 [43.28294, 5.37089],
 [43.28294, 5.37086],
 [43.28303, 5.37081],
 [43.28306, 5.37077],
 [43.28298, 5.37074],
 [43.28294, 5.37075],
 [43.28292, 5.37071],
 [43.28304, 5.37069],
 [43.28312, 5.37065],
 [43.28317, 5.37061],
 [43.28301, 5.37044],
 [43.28295, 5.37042],
 [43.28268, 5.37041],
 [43.28263, 5.3704],
 [43.28265, 5.37044],
 [43.28265, 5.37047],
 [43.28263, 5.37051],
 [43.28262, 5.37101],
 [43.2826, 5.37113],
 [43.28254, 5.37124],
 [43.2825, 5.37138],
 [43.28246, 5.37145],
 [43.28245, 5.3714],
 [43.28245, 5.37141],
 [43.28245, 5.3714],
 [43.28246, 5.37145],
 [43.28255, 5.37215],
 [43.28254, 5.37235],
 [43.28251, 5.37246],
 [43.28247, 5.37254],
 [43.2824, 5.37265],
 [43.28232, 5.37279],
 [43.28198, 5.37333],
 [43.28195, 5.37337],
 [43.28186, 5.37329],
 [43.28178, 5.37322],
 [43.28169, 5.37322],
 [43.28113, 5.37347],
 [43.28105, 5.37349],
 [43.28089, 5.37346],
 [43.28038, 5.37354],
 [43.2803, 5.37359],
 [43.28021, 5.37369],
 [43.28012, 5.37397],
 [43.28007, 5.37402],
 [43.27978, 5.37417],
 [43.27963, 5.37419],
 [43.27943, 5.37408],
 [43.27929, 5.37396],
 [43.27919, 5.37381],
 [43.27909, 5.37383],
 [43.27889, 5.37395],
 [43.27876, 5.37386],
 [43.27847, 5.37359],
 [43.27798, 5.37303],
 [43.2778, 5.37285],
 [43.27772, 5.37281],
 [43.2777, 5.37278],
 [43.27726, 5.37298],
 [43.27705, 5.37303],
 [43.27701, 5.37292],
 [43.27679, 5.37301],
 [43.27649, 5.37303],
 [43.27635, 5.37299],
 [43.27634, 5.37299],
 [43.27592, 5.37274],
 [43.27522, 5.37264],
 [43.27496, 5.37269],
 [43.2746, 5.37266],
 [43.27438, 5.37273],
 [43.27423, 5.37273],
 [43.27389, 5.37281],
 [43.27361, 5.37282],
 [43.27339, 5.37269],
 [43.27208, 5.37265],
 [43.27148, 5.3724],
 [43.27099, 5.37227],
 [43.27061, 5.37219],
 [43.2705, 5.37221],
 [43.27011, 5.37232],
 [43.26999, 5.37241],
 [43.26976, 5.37251],
 [43.2697, 5.37258],
 [43.26966, 5.37259],
 [43.26954, 5.37254],
 [43.26913, 5.37258],
 [43.26891, 5.37258],
 [43.26864, 5.37253],
 [43.26855, 5.37257],
 [43.26782, 5.37263],
 [43.26769, 5.37206],
 [43.26767, 5.37197],
 [43.26776, 5.37187],
 [43.26772, 5.37179],
 [43.26791, 5.37158],
 [43.26812, 5.37131],
 [43.26831, 5.37107],
 [43.26844, 5.37086],
 [43.26854, 5.37062],
 [43.26859, 5.37048],
 [43.26856, 5.37037],
 [43.26868, 5.36997],
 [43.26868, 5.36977],
 [43.26878, 5.36942],
 [43.26879, 5.36926],
 [43.26874, 5.36877],
 [43.26875, 5.36866],
 [43.2688, 5.36852],
 [43.26886, 5.36845],
 [43.26935, 5.36688],
 [43.26943, 5.36668],
 [43.26953, 5.36649],
 [43.26969, 5.36625],
 [43.2697, 5.36623],
 [43.26976, 5.36628],
 [43.26986, 5.36614],
 [43.2699, 5.36618],
 [43.26999, 5.36618],
 [43.27003, 5.36615],
 [43.27009, 5.36606],
 [43.27014, 5.36594],
 [43.27015, 5.36588],
 [43.27014, 5.36576],
 [43.27012, 5.3657],
 [43.27017, 5.36569],
 [43.27068, 5.36573],
 [43.27109, 5.36609],
 [43.27127, 5.36628],
 [43.27131, 5.36636],
 [43.27134, 5.36634],
 [43.27135, 5.3663],
 [43.27134, 5.36626],
 [43.27103, 5.36579],
 [43.27101, 5.36573],
 [43.27102, 5.36571],
 [43.27106, 5.3657],
 [43.27134, 5.36592],
 [43.27162, 5.36601],
 [43.27171, 5.36605],
 [43.27174, 5.36604],
 [43.27174, 5.366],
 [43.27172, 5.36596],
 [43.27151, 5.36577],
 [43.27164, 5.36558],
 [43.27185, 5.36525],
 [43.27187, 5.36529],
 [43.27196, 5.36519],
 [43.27235, 5.36576],
 [43.27248, 5.3659],
 [43.2726, 5.36605],
 [43.27266, 5.36608],
 [43.27311, 5.366],
 [43.27375, 5.36604],
 [43.2738, 5.36602],
 [43.27401, 5.36591],
 [43.27404, 5.36588],
 [43.27406, 5.36581],
 [43.27406, 5.36574],
 [43.27394, 5.3655],
 [43.27394, 5.36543],
 [43.27399, 5.36543],
 [43.27469, 5.36575],
 [43.27526, 5.3661],
 [43.2758, 5.36591],
 [43.27599, 5.36578],
 [43.27619, 5.36553],
 [43.27624, 5.36561],
 [43.27647, 5.36577],
 [43.27667, 5.36597],
 [43.27689, 5.36605],
 [43.27711, 5.36598],
 [43.27726, 5.366],
 [43.27738, 5.36607],
 [43.2776, 5.3663],
 [43.27789, 5.36655],
 [43.27815, 5.36699],
 [43.27866, 5.36751],
 [43.27871, 5.36761],
 [43.27886, 5.36798],
 [43.27895, 5.36807],
 [43.27908, 5.36816],
 [43.2794, 5.36834],
 [43.27967, 5.36865],
 [43.27977, 5.3687],
 [43.27994, 5.3687],
 [43.28031, 5.36866],
 [43.28035, 5.36866],
 [43.28039, 5.3687],
 [43.2805, 5.36895],
 [43.28058, 5.36898],
 [43.28066, 5.36895],
 [43.2808, 5.36888],
 [43.28085, 5.36887],
 [43.28116, 5.36893],
 [43.28134, 5.36906],
 [43.28139, 5.36908],
 [43.28143, 5.36907],
 [43.28146, 5.36903],
 [43.2815, 5.36894],
 [43.28146, 5.36842],
 [43.28146, 5.36835],
 [43.28157, 5.36843],
 [43.28168, 5.36846],
 [43.28187, 5.36836],
 [43.28209, 5.36832],
 [43.28209, 5.36834],
 [43.28261, 5.36884],
 [43.28269, 5.36894],
 [43.28278, 5.3691],
 [43.28294, 5.36931],
 [43.28367, 5.36921],
 [43.28389, 5.36921],
 [43.28397, 5.36925],
 [43.28401, 5.36924],
 [43.284, 5.36934],
 [43.28415, 5.36961],
 [43.28421, 5.36979],
 [43.28422, 5.36991],
 [43.28427, 5.37003],
 [43.28433, 5.37012],
 [43.28456, 5.37034],
 [43.28496, 5.37038],
 [43.28522, 5.37043],
 [43.28529, 5.3705],
 [43.28574, 5.37032],
 [43.28577, 5.37047],
 [43.28604, 5.37054],
 [43.28622, 5.37059],
 [43.28625, 5.37054],
 [43.2863, 5.37053],
 [43.28634, 5.37057],
 [43.28635, 5.37063],
 [43.2895, 5.37157],
 [43.28977, 5.37162],
 [43.28985, 5.37152],
 [43.28984, 5.37144],
 [43.28986, 5.37137],
 [43.28991, 5.37133],
 [43.28997, 5.37136],
 [43.28999, 5.3714],
 [43.29001, 5.37161],
 [43.29047, 5.37181],
 [43.29067, 5.37202],
 [43.29072, 5.37208],
 [43.29074, 5.37202],
 [43.29078, 5.37197],
 [43.29098, 5.37212],
 [43.29212, 5.37164],
 [43.29218, 5.37161],
 [43.29225, 5.3719],
 [43.29246, 5.3718],
 [43.29248, 5.37188],
 [43.29251, 5.372],
 [43.29323, 5.37168],
 [43.2934, 5.37161],
 [43.29343, 5.37171],
 [43.29348, 5.37168],
 [43.29354, 5.37165],
 [43.29407, 5.37376],
 [43.29414, 5.37396],
 [43.29426, 5.37424],
 [43.29435, 5.37399],
 [43.29481, 5.37385],
 [43.2948, 5.37381],
 [43.29525, 5.37368],
 [43.29526, 5.37372],
 [43.29558, 5.37362],
 [43.29589, 5.37352],
 [43.2961, 5.3736],
 [43.29628, 5.37291],
 [43.29631, 5.37274],
 [43.29626, 5.37218],
 [43.29623, 5.37194],
 [43.29627, 5.37193],
 [43.29631, 5.37192],
 [43.29628, 5.37154],
 [43.29628, 5.37132],
 [43.29623, 5.37085]],
    strokeColor: 'black',
    strokeOpacity: 0.8,
    strokeWeight: 6
  })
// map.drawRoute({
//   origin: [43.29611, 5.36993],
//   destination: [43.28557, 5.35112],
//   travelMode: 'walking',
//   strokeColor: '#131540',
//   strokeOpacity: 0.6,
//   strokeWeight: 6
// });
  if (markers.length === 0) {
    map.setZoom(2);
  } else if (markers.length === 1) {
    map.setCenter(markers[0].lat, markers[0].lng);
    map.setZoom(14);
  } else {
    map.fitLatLngBounds(markers);



  }
}


